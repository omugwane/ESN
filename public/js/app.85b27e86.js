(function(e){function t(t){for(var a,o,r=t[0],c=t[1],l=t[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},n={app:0},i=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0cbc":function(e,t,s){},1:function(e,t){},1240:function(e,t,s){"use strict";var a=s("e9bd"),n=s.n(a);n.a},12767:function(e,t,s){"use strict";var a=s("e9d9"),n=s.n(a);n.a},"22d3":function(e,t,s){"use strict";var a=s("9e9e"),n=s.n(a);n.a},"29c7":function(e,t,s){"use strict";var a=s("bbb0"),n=s.n(a);n.a},3124:function(e,t,s){"use strict";s.r(t),s.d(t,"configRequest",(function(){return o})),s.d(t,"checkTokenError",(function(){return r}));var a=s("2b0e"),n=s("a18c"),i=s("f9c4");const o=e=>{console.log("process.env.NODE_ENV ","production");let t=a["default"].$cookies.get("token");return e.headers={Accept:"application/json, text/plain, */*","x-access-token":t},e.url=Object(i["n"])()+e.url,e},r=e=>(e.response&&403===e.response.status&&n["a"].push({name:"login"}),Promise.reject(e))},"32dc":function(e,t,s){},"33a9":function(e,t){e.exports.STATUSES={OK:{colorCode:"green"},HELP:{colorCode:"#C2AF0A"},EMERGENCY:{colorCode:"red"},UNDEFINED:{colorCode:""}}},4533:function(e,t,s){},"55ba":function(e,t,s){"use strict";var a=s("7e44"),n=s.n(a);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("45fc"),s("d3b7"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],o=(s("5c0b"),s("2877")),r={},c=Object(o["a"])(r,n,i,!1,null,null,null),l=c.exports,u=s("a18c"),d=s("bc3a"),m=s.n(d),h=s("a7fe"),p=s.n(h),f=s("2b27"),v=s.n(f),g=s("5f5b"),C=s("b1e0"),w=(s("c9c9"),s("5363"),s("5132")),b=s.n(w),y=s("d706"),_=s.n(y),k=s("f9c4"),U=s("5886"),x=s("8e5f"),S=s.n(x),$=(s("4413"),s("209f")),P=s.n($);s.d(t,"eventBus",(function(){return A})),a["default"].use(U["a"]),a["default"].use(P.a),a["default"].use(s("2ead"));var z=s("3124");a["default"].use(new b.a({debug:!0,connection:Object(k["n"])()})),a["default"].use(_.a),a["default"].component("multiselect",S.a),a["default"].use(g["a"]),a["default"].use(C["a"]),m.a.interceptors.request.use(z.configRequest,(function(e){return Promise.reject(e)})),m.a.interceptors.response.use((function(e){return e}),z.checkTokenError),a["default"].use(p.a,m.a),a["default"].use(v.a),u["a"].beforeEach((function(e,t,s){e.matched.some((function(e){return e.meta.requiresAuth}))&&!window.$cookies.isKey("user")&&s("/login"),s()}));var A=new a["default"];a["default"].config.productionTip=!1,new a["default"]({router:u["a"],render:function(e){return e(l)}}).$mount("#app")},"58aa":function(e,t,s){},"5c0b":function(e,t,s){"use strict";var a=s("9c0c"),n=s.n(a);n.a},7391:function(e,t,s){},7408:function(e,t,s){},7581:function(e,t,s){"use strict";var a=s("8a87"),n=s.n(a);n.a},7952:function(e,t,s){"use strict";var a=s("864b"),n=s.n(a);n.a},"7e44":function(e,t,s){},"839e":function(e,t,s){"use strict";var a=s("4533"),n=s.n(a);n.a},"864b":function(e,t,s){},"8a87":function(e,t,s){},"8e90":function(e,t,s){"use strict";var a=s("32dc"),n=s.n(a);n.a},"97dc":function(e,t,s){"use strict";var a=s("7408"),n=s.n(a);n.a},"9c0c":function(e,t,s){},"9e9e":function(e,t,s){},a18c:function(e,t,s){"use strict";var a=s("2b0e"),n=s("8c4f"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-wrapper"},[s("div",{staticClass:"card mt-md-5 login-card"},[s("div",{staticClass:"card-body"},[s("h1",{staticClass:"display-5 text-center page-title"},[e._v("ESN Login")]),s("form",{staticClass:"mt-sm-5"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter username",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[e._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Enter password",id:"password"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("button",{staticClass:"btn btn-primary btn-block my-2",attrs:{type:"button"},on:{click:e.login}},[e._v("Log in")]),s("small",{staticClass:"d-block"},[e._v(" Not already registered? click "),s("router-link",{attrs:{to:{name:"register"}}},[s("a",{attrs:{href:""}},[e._v("here")])]),e._v(" to register ")],1)])])])])},o=[],r=s("f9c4"),c={name:"Login",created:function(){console.log("API baseURL ",r["n"]())},data:function(){return{username:"",password:""}},methods:{login:function(){var e=this;e.authenticate()},authenticate:function(){var e=this,t=this;t.$http.post(r["e"],{username:t.username,password:t.password}).then((function(e){var s=e.data,a={username:s.data.user.username,role:s.data.user.role,userId:s.data.user._id};t.$cookies.config("1d"),t.$cookies.set("user",a),t.$cookies.set("token",s.data.token),t.$router.push({name:"chat"})})).catch((function(t){t.response?e.notify(t.response.data.message,!0):e.notify(t)}))},notify:function(e,t){this.$swal({title:"Error",text:t?e:"Either username or password is incorrect!",icon:"error",toast:!1,showConfirmButton:!0})}}},l=c,u=(s("f457"),s("2877")),d=Object(u["a"])(l,i,o,!1,null,"769fff5d",null),m=d.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-wrapper"},[s("div",{staticClass:"header"},[e._v(" Logged in: "),s("span",[e._v(e._s(e.loggedInUsername.toUpperCase()))])]),s("div",{staticClass:"body"},[s("div",{attrs:{id:"side-bar"}},[e._m(0),s("div",{staticClass:"side-menu"},[s("div",{staticClass:"menu-item"},[s("router-link",{attrs:{to:{name:"search-information"}}},[s("span",{staticClass:"mdi mdi-magnify mdi-18px"}),s("span",{staticClass:"menu-item-text"},[e._v(" Search ")])])],1),s("div",{staticClass:"menu-item"},[s("router-link",{attrs:{to:{name:"private-chat"}}},[s("span",{staticClass:"mdi mdi-chat-outline"}),s("span",{staticClass:"mdi mdi-lock-open-outline",staticStyle:{"font-size":"10px"}}),s("span",{staticClass:"menu-item-text"},[e._v(" Private Chat ")])])],1),s("div",{staticClass:"menu-item"},[s("router-link",{attrs:{to:{name:"chat"}}},[s("span",{staticClass:"mdi mdi-chat-outline"}),e._v(" "),s("span",{staticClass:"menu-item-text"},[e._v("Public Chat")])])],1),s("div",{staticClass:"menu-item"},[s("router-link",{attrs:{to:{name:"share-status"}}},[s("span",{staticClass:"mdi mdi-share-outline"}),e._v(" "),s("span",{staticClass:"menu-item-text"},[e._v("Share Status ")])])],1),s("div",{staticClass:"menu-item"},[s("router-link",{attrs:{to:{name:"post-announcement"}}},[s("span",{staticClass:"mdi mdi-share-outline"}),e._v(" "),s("span",{staticClass:"menu-item-text"},[e._v("Announcements ")])])],1),s("div",{staticClass:"menu-item"},[s("router-link",{attrs:{to:{name:"all-citizens"}}},[s("span",{staticClass:"mdi mdi-folder-account-outline"}),e._v(" "),s("span",{staticClass:"menu-item-text"},[e._v("ESN Directory")])])],1)]),s("div",{staticClass:"side-footer"},[s("button",{attrs:{type:"button"},on:{click:e.logout}},[s("span",{staticClass:"btn-label"},[e._v("Sign out")]),e._v(" "),s("span",{staticClass:"mdi mdi-logout"})])])]),s("div",{attrs:{id:"content"}},[s("router-view")],1)])])},p=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-title"},[s("h4",{staticClass:"display-5 text-center"},[e._v("ESN")])])}],f=(s("b0c0"),s("56d7")),v={name:"MainContainer",created:function(){var e=this.$cookies.get("user"),t=this.$cookies.get("newUser");this.loggedInUsername=e.username,e.username===t&&(this.$swal({title:"Greeting",text:t.toUpperCase()+", welcome to ESN community! Click on this alert to close it.",toast:!0,position:"top",showConfirmButton:!1}),window.$cookies.remove("newUser")),this.loggedInUsername=e.username,this.loggedInUserId=e.userId},data:function(){return{loggedInUsername:"",loggedInUserId:""}},sockets:{connect:function(){},disconnect:function(){},newPublicChat:function(e){this.notifyUser(e),f["eventBus"].$emit("new-chat-message",e)},newAnnouncement:function(e){f["eventBus"].$emit("newAnnouncement",e)},updatedUser:function(e){var t=!1;if(e.active||this.loggedInUserId!==e._id){if(this.loggedInUserId===e._id){var s={username:e.username,role:e.role,userId:e._id};this.$cookies.set("user",s),this.loggedInUsername=e.username,t=!0}}else this.logout(),this.$swal({text:"Sorry! Your account has been deactivated by one of the admins. Contact an admin to re-activate your account.",icon:"info",toast:!1,showConfirmButton:!0});f["eventBus"].$emit("updateUserProfile",{user:e,isMe:t})}},methods:{logout:function(){window.$cookies.isKey("user")&&(window.$cookies.remove("user"),this.$router.push({name:"login"}))},notifyUser:function(e){var t=this,s={text:" Received a new public chat message from  "+e.sender.toUpperCase(),icon:"info",toast:!0,position:"top",showConfirmButton:!1,onOpen:function(e){e.addEventListener("mouseenter",t.$swal.stopTimer),e.addEventListener("mouseleave",t.$swal.resumeTimer)}};"chat"!==this.$route.name&&e.sender!==this.loggedInUsername&&null===e.receiver?this.$swal(s):"private-chat"!==this.$route.name&&e.sender!==this.loggedInUsername&&e.receiver===this.loggedInUsername&&(s.text="Received a new private chat message from  "+e.sender.toUpperCase(),this.$swal(s))}}},g=v,C=(s("97dc"),Object(u["a"])(g,h,p,!1,null,"21360a78",null)),w=C.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ChatRoom",{attrs:{"logged-in-username":e.loggedInUsername}})},y=[],_=(s("99af"),s("498a"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"chat-room"}},[s("div",{ref:"chatsContainer",attrs:{id:"chats"}},[e._l(e.chats,(function(t){return s("div",{key:t._id,staticClass:"chat",class:t.sender===e.loggedInUsername?"sent-msg-box":"received-msg-box"},[s("div",{staticClass:"message",class:t.sender===e.loggedInUsername?"sent":"received"},[s("div",{staticClass:"heading"},[s("div",{staticClass:"title"},[s("h6",{staticClass:"chat-owner"},[e._v(" "+e._s(t.sender===e.loggedInUsername?"Me":""+t.sender)+" ")]),s("small",{staticClass:"citizen-status",style:{color:e.getStatusColor(t.status)}},[e._v(" status: "+e._s(e.getStatusLabel(t.status))+" ")])]),s("small",[e._v(" "+e._s(e._f("moment")(t.postedAt,"dddd, MMMM Do YYYY, h:mm a"))+" ")])]),"video"===t.type?s("div",{staticClass:"video-thumbnail"},[s("VideoPlayer",{attrs:{options:e.getVideoOptions(t.fileUrl)}}),s("button",{staticClass:"open-player",on:{click:function(s){return e.showPlayer(t.fileUrl)}}},[e._v(" Open player "),s("span",{staticClass:"mdi mdi-arrow-expand"})])],1):e._e(),"image"===t.type?s("div",{staticClass:"chat-image"},[s("object",{staticStyle:{width:"100%"},attrs:{data:"../assets/placeholder.jpg",type:"image/jpg"}},[s("img",{attrs:{src:e.getAbsoluteURL(t.fileUrl),alt:"Chat image"}})])]):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.content.length,expression:"chat.content.length !== 0"}],staticClass:"msg-body",class:{caption:"text"!==t.type}},["video"===t.type?s("small",{staticClass:"file-caption"},[e._v("Caption")]):e._e(),e._v(" "+e._s(t.content)+" ")])])])})),e.chats.length<1?s("p",{staticClass:"text-center mt-3"},[s("small",[e._v("No chats available yet!")])]):e._e()],2),s("div",{directives:[{name:"show",rawName:"v-show",value:e.attachmentsPopupShown,expression:"attachmentsPopupShown"}],attrs:{id:"file-attachments-popup"}},[e._m(0),s("div",{staticClass:"attach-buttons"},[s("button",{staticClass:"lnh-4",attrs:{type:"button"},on:{click:function(t){return e.selectFile("video")}}},[s("span",{staticClass:"mdi mdi-video-plus mdi-36px"})]),s("button",{attrs:{type:"button"},on:{click:function(t){return e.selectFile("image")}}},[s("span",{staticClass:"mdi mdi-image-plus mdi-24px"})])]),s("form",{ref:"frmFileSelector"},[s("input",{ref:"fileSelector",attrs:{type:"file",id:"file-selector"},on:{change:e.onFileSelection}})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedFile&&"image"===e.typeOfFileSelected,expression:"selectedFile && typeOfFileSelected==='image'"}],attrs:{id:"image-preview"}},[s("div",{staticClass:"img-holder"},[s("img",{attrs:{src:e.selectedImageUrl,alt:"Image Preview"}})]),s("button",{attrs:{id:"btn-close-image-preview"},on:{click:e.resetChatForm}},[s("span",{staticClass:"mdi mdi-close mdi-24px"})])]),s("div",{attrs:{id:"chat-form"}},[s("div",{staticClass:"input-chat-box"},[s("button",{attrs:{type:"button",id:"btn-open-attachment-popup"},on:{click:function(t){e.attachmentsPopupShown=!e.attachmentsPopupShown}}},[s("span",{staticClass:"mdi mdi-attachment mdi-24px"})]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newChat,expression:"newChat"}],ref:"inputChatText",staticClass:"input-chat",attrs:{type:"text",placeholder:"Enter message"},domProps:{value:e.newChat},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitChat(t)},input:function(t){t.target.composing||(e.newChat=t.target.value)}}})]),s("button",{staticClass:"btn-post-chat",attrs:{type:"button"},on:{click:e.submitChat}},[s("span",{staticClass:"mdi mdi-send mdi-24px"})])]),e.selectedFile?s("FilePreview",{attrs:{"chat-details":e.chatDetails,file:e.selectedFile,visible:e.showPreview},on:{closed:e.disposeFile}}):e._e(),s("sweet-modal",{ref:"modal",attrs:{id:"modal-player","enable-mobile-fullscreen":"","overlay-theme":"dark","modal-theme":"dark",width:"70%",blocking:""}},[s("template",{slot:"title"},[s("h5",{staticClass:"modal-title"},[e._v("Video Player")])]),s("div",{attrs:{id:"player"}},[e.playerShown?s("video-player",{attrs:{options:e.playerDetails}}):e._e()],1)],2)],1)}),k=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"popup-header"},[s("small",[s("i",[e._v("Attach file")])])])}],U=(s("b680"),s("d3b7"),s("ac1f"),s("3ca3"),s("1276"),s("ddb0"),s("2b3d"),s("33a9")),x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.visible?s("sweet-modal",{ref:"modal",attrs:{"enable-mobile-fullscreen":"","overlay-theme":"dark",blocking:""}},[s("template",{slot:"title"},[s("h4",{staticClass:"modal-title"},[e._v("Video Preview")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[e.file&&e.videoOptions&&e.visible?s("video-player",{attrs:{options:e.videoOptions}}):e._e()],1),s("div",{staticClass:"col-md-4 right-side"},[s("div",{staticClass:"file-details"},[s("h3",{staticClass:"subtitle"},[e._v("Details")]),s("p",[e._v("Name: "+e._s(e.file.name))]),s("p",{staticStyle:{color:"#A90C1C","font-weight":"bold"}},[e._v("Size (max is 30 MB): "+e._s(e.getFileSize)+" MB")]),s("p",[e._v("Type: "+e._s(e.file.type))])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col mt-3"},[s("label",{attrs:{for:"file-caption"}},[e._v("Caption")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.fileCaption,expression:"fileCaption"}],attrs:{name:"caption",id:"file-caption",placeholder:"Type message here..."},domProps:{value:e.fileCaption},on:{input:function(t){t.target.composing||(e.fileCaption=t.target.value)}}}),e._v(" "),s("div",{staticClass:"actions mb-4"},[s("button",{staticClass:"btn btn-secondary mr-3",on:{click:e.closeModal}},[e._v(" Close "),s("span",{staticClass:"mdi mdi-close"})]),s("button",{staticClass:"btn btn-primary btn-send",on:{click:e.submitChat}},[e._v(" Send "),s("span",{staticClass:"mdi mdi-send"})]),s("loading",{attrs:{active:e.loader.loading,"can-cancel":!1,"is-full-page":!0,"background-color":e.loader.backgroundColor,opacity:e.loader.opacity,loader:e.loader.loaderType,color:e.loader.color},on:{"update:active":function(t){return e.$set(e.loader,"loading",t)}}})],1),s("b-alert",{attrs:{variant:"success",dismissible:""},model:{value:e.response.success,callback:function(t){e.$set(e.response,"success",t)},expression:"response.success"}},[e._v(" "+e._s(e.response.message)+" ")]),s("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.response.error,callback:function(t){e.$set(e.response,"error",t)},expression:"response.error"}},[e._v(" "+e._s(e.response.message)+" ")])],1)])],2):e._e()],1)},S=[],$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("video",{ref:"videoPlayer",staticClass:"video-js"})])},P=[],z=s("f0e2"),A={name:"VideoPlayer",props:{options:{type:Object,default:function(){return{}}}},mounted:function(){this.player=Object(z["a"])(this.$refs.videoPlayer,this.options,(function(){}))},beforeDestroy:function(){this.player&&this.player.dispose()},data:function(){return{player:null}},methods:{}},N=A,I=(s("8e90"),Object(u["a"])(N,$,P,!1,null,"0ff24ef6",null)),O=I.exports,E=s("6dfe"),T=s("9062"),F=s.n(T),M=(s("e40d"),{name:"FilePreview",components:{SweetModal:E["a"],VideoPlayer:O,Loading:F.a},props:{file:{type:File,default:null},fileType:{type:String,default:"video"},visible:{type:Boolean,default:!1},chatDetails:{type:Object,default:null}},mounted:function(){var e=this;this.$refs.modal.open();var t=document.querySelector("div.sweet-action-close");t.addEventListener("click",(function(){e.closeModal()}))},data:function(){return{fileCaption:"",response:{success:!1,error:!1,message:""},loader:{loading:!1,backgroundColor:"#fff",opacity:.5,loaderType:"dots",color:"#A90C1C"}}},computed:{videoOptions:function(){return"video"===this.fileType&&this.file?{autoplay:!1,controls:!0,fluid:!0,sources:[{src:URL.createObjectURL(this.file),type:"video/mp4"}]}:null},getFileSize:function(){return this.file?(this.file.size/1024/1024).toFixed(2):null}},watch:{},methods:{resetMessage:function(){this.response.success=!1,this.response.error=!1},showMessage:function(e,t){this.loader.loading=!1,this.resetMessage(),this.response.message=t,e?this.response.success=!0:this.response.error=!0},closeModal:function(){this.$emit("closed")},submitChat:function(){var e=this.getFileSize||0;if(this.chatDetails.chatSender&&e>0&&e<=30){var t=new FormData;t.append("file",this.file,this.file.name),t.append("content",this.fileCaption),t.append("sender",this.chatDetails.chatSender),t.append("receiver",this.chatDetails.chatReceiver);var s=this;s.loader.loading=!0,s.$http.post(r["l"],t).then((function(e){s.showMessage(!0,e.data.message)})).catch((function(){s.showMessage(!1,"Uploading video failed. Note that video should not be larger than 100 MB")}))}else e>30?this.showMessage(!1,"File is too big! Cannot submit a file larger than 30 MB"):e<=0?this.showMessage(!1,"File is too small! Cannot submit 0 MB file."):this.showMessage(!1,"Only a registered citizen can send chats!")}}}),j=M,R=(s("29c7"),Object(u["a"])(j,x,S,!1,null,null,null)),L=R.exports,D={name:"ChatRoom",components:{FilePreview:L,VideoPlayer:O,SweetModal:E["a"]},props:{chatWithCitizen:{type:Object,default:null},loggedInUsername:{type:String,required:!0}},created:function(){this.chatWithCitizen?this.getPrivateChats():this.getPublicChats()},mounted:function(){var e=this;f["eventBus"].$on("new-chat-message",(function(t){t&&e.chatWithCitizen&&(t.sender===e.chatWithCitizen.username||t.sender===e.loggedInUsername)?e.chats=e.chats.concat(t):t&&!t.receiver&&(e.chats=e.chats.concat(t)),e.scrollToLatestMessage()}));var t=document.querySelector("#modal-player div.sweet-action-close");t.addEventListener("click",(function(){e.closePlayer()}))},data:function(){return{loading:!1,newChat:"",chats:[],attachmentsPopupShown:!1,typeOfFileSelected:"",selectedFile:null,showPreview:!1,playerShown:!1,playerDetails:{autoplay:!0,controls:!0,fluid:!0,sources:[{src:"",type:"video/mp4"}]}}},computed:{chatDetails:function(){return{chatReceiver:this.chatWithCitizen?"".concat(this.chatWithCitizen.username):null,chatSender:this.loggedInUsername}},selectedImageUrl:function(){return this.selectedFile&&"image"===this.typeOfFileSelected?URL.createObjectURL(this.selectedFile):""}},watch:{chatWithCitizen:function(e){e&&this.getPrivateChats()}},methods:{showPlayer:function(e){this.playerDetails.sources[0].src=r["m"]()+e,this.playerShown=!0,this.$refs.modal.open()},closePlayer:function(){this.playerShown=!1},selectFile:function(e){this.typeOfFileSelected=e;var t="";"video"===e?t="video/mp4,video/x-m4v,video/*":"image"===e&&(t="image/png,image/jpeg"),this.showPreview=!1,this.$refs.fileSelector.setAttribute("accept",t),this.$refs.fileSelector.click(),this.attachmentsPopupShown=!1},onFileSelection:function(){var e=this.$refs.fileSelector.files[0],t=e.type.split("/")[0];t!==this.typeOfFileSelected?this.$swal({text:"Unexpected file chosen. The file must of type "+this.typeOfFileSelected,icon:"error",toast:!1,showConfirmButton:!0}):(this.selectedFile=e,"video"===this.typeOfFileSelected?this.showPreview=!0:"image"===this.typeOfFileSelected&&this.$refs.inputChatText.focus()),this.$refs.frmFileSelector.reset()},disposeFile:function(){this.showPreview=!1,this.selectedFile=null},getStatusColor:function(e){return U["STATUSES"][e.toUpperCase()].colorCode},getStatusLabel:function(e){return"UNDEFINED"===e.toUpperCase()?"Not available":e.toUpperCase()},submitChat:function(){this.$refs.inputChatText.blur(),null!=this.selectedFile?this.submitImageChat():this.submitTextChat()},submitTextChat:function(){var e=this,t=null;null!==e.chatWithCitizen&&(t=e.chatWithCitizen.username);var s={sender:e.loggedInUsername,content:e.newChat,receiver:t};0!==e.newChat.trim().length?e.$http.post(r["h"],s).then((function(){e.newChat=""})).catch((function(e){alert(e)})):this.$swal({text:"Can not post empty chat!",icon:"error",toast:!1,showConfirmButton:!0})},submitImageChat:function(){var e=this,t=(this.selectedFile.size/1024/1024).toFixed(2);if(t<=5){var s=null;null!==e.chatWithCitizen&&(s=e.chatWithCitizen.username);var a=new FormData;a.append("file",this.selectedFile,this.selectedFile.name),a.append("content",this.newChat),a.append("sender",e.loggedInUsername),a.append("receiver",s),e.$http.post(r["l"],a).then((function(t){e.showMessage(!0,t.data.message),e.resetChatForm()})).catch((function(t){console.log("Error occurred",t),e.showMessage(!1,"Uploading image failed. Note that image should not be larger than 5 MB")}))}else e.showMessage(!1,"Image size (".concat(t,") selected is bigger than 5 MB. Please, select a smaller size image."))},resetChatForm:function(){this.selectedFile=null,this.newChat="",this.attachmentsPopupShown=!1,this.showPreview=!1,this.playerShown=!1},showMessage:function(e,t){this.$swal({text:t,icon:e?"success":"error",toast:!1,showConfirmButton:!0})},getPublicChats:function(){var e=this;e.$http.get(r["b"]).then((function(t){var s=t.data;e.chats=s.data,e.scrollToLatestMessage()})).catch((function(e){alert(e)}))},getPrivateChats:function(){var e=this;e.$http.get(r["b"]+this.loggedInUsername+"/"+this.chatWithCitizen.username).then((function(t){var s=t.data;e.chats=s.data,e.scrollToLatestMessage()})).catch((function(e){alert(e)}))},getVideoOptions:function(e){return{autoplay:!1,controls:!0,fluid:!0,sources:[{src:this.getAbsoluteURL(e),type:"video/mp4"}]}},getAbsoluteURL:function(e){return r["m"]()+e},scrollToLatestMessage:function(){var e=this;this.$nextTick((function(){e.$refs.chatsContainer.scrollTop=e.$refs.chatsContainer.scrollHeight}))}}},B=D,q=(s("22d3"),s("eacb"),Object(u["a"])(B,_,k,!1,null,"58fa66e8",null)),W=q.exports,Y={name:"PublicChatRoom",components:{ChatRoom:W},created:function(){var e=this.$cookies.get("user");this.loggedInUsername=e.username},mounted:function(){},data:function(){return{loading:!1,loggedInUsername:"",newChat:"",chats:[]}},methods:{postChat:function(){var e=this,t={author:e.loggedInUsername,content:e.newChat};0!==e.newChat.trim().length?e.$http.post(r["h"],t).then((function(){e.chats=e.chats.concat(t),e.newChat=""})).catch((function(e){alert(e)})):alert("Can not post empty chat!")},getAllChats:function(){var e=this;e.$http.get(r["b"]).then((function(t){var s=t.data;e.chats=s.data})).catch((function(e){alert(e)}))}}},V=Y,K=(s("7581"),Object(u["a"])(V,b,y,!1,null,"0b6b5fde",null)),G=K.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"citizens-list-wrapper"},[s("h4",{staticClass:"display-4"},[e._v("ESN citizens directory")]),s("div",{staticClass:"wrapper"},[e.citizens.length>0?s("ul",{staticClass:"list-group"},e._l(e.filterCitizens,(function(t){return s("li",{key:t.username,staticClass:"list-group-item"},[s("div",[s("div",{staticClass:"citizen-names"},[e._v(" "+e._s(t.username)+" "),""!==t.firstName.trim()?s("span",[e._v("("+e._s(t.firstName+", "+t.lastName)+")")]):e._e(),s("small",{staticClass:"citizen-status",style:{color:e.getStatusColor(t.status)}},[e._v(" (status: "+e._s("UNDEFINED"===t.status.toUpperCase()?"Not available":""+t.status.toUpperCase())+") ")])]),s("div",{staticClass:"citizen-details"},[s("small",[s("span",{staticClass:"mdi mdi-email"}),e._v(" "+e._s(t.email))]),e._v(" "),s("small",[s("span",{staticClass:"mdi mdi-phone"}),e._v(" "+e._s(t.phone))])])]),"Administrator"===e.loggedInUserRole?s("button",{attrs:{type:"button",id:"btn-update-user",title:"Click to update"},on:{click:function(s){return e.getUserProfileInfo(t.username)}}},[s("span",{staticClass:"mdi mdi-account-edit mdi-24px"})]):e._e()])})),0):s("div",{staticClass:"text-center"},[s("small",[e._v("No citizens available yet")])])]),s("sweet-modal",{ref:"modal",attrs:{id:"modal-player","enable-mobile-fullscreen":"","overlay-theme":"dark",blocking:""}},[s("template",{slot:"title"},[s("h5",{staticClass:"modal-title"},[e._v("Update User Profile Information")])]),s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser.username,expression:"selectedUser.username"}],ref:"username",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter username",id:"username"},domProps:{value:e.selectedUser.username},on:{input:function(t){t.target.composing||e.$set(e.selectedUser,"username",t.target.value)}}})]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"password"}},[e._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser.password,expression:"selectedUser.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Enter password",id:"password"},domProps:{value:e.selectedUser.password},on:{input:function(t){t.target.composing||e.$set(e.selectedUser,"password",t.target.value)}}})]),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"re-password"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser.verifyPassword,expression:"selectedUser.verifyPassword"}],staticClass:"form-control mt-2",attrs:{type:"password",placeholder:"Re-enter password",id:"re-password"},domProps:{value:e.selectedUser.verifyPassword},on:{input:function(t){t.target.composing||e.$set(e.selectedUser,"verifyPassword",t.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("div",[e._v("Privilege")]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser.role,expression:"selectedUser.role"}],staticClass:"form-check-input",attrs:{type:"radio",name:"privilege",id:"citizen",value:"Citizen"},domProps:{checked:e._q(e.selectedUser.role,"Citizen")},on:{change:function(t){return e.$set(e.selectedUser,"role","Citizen")}}}),s("label",{staticClass:"form-check-label",attrs:{for:"citizen"}},[e._v("Citizen")])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser.role,expression:"selectedUser.role"}],staticClass:"form-check-input",attrs:{type:"radio",name:"privilege",id:"coordinator",value:"Coordinator"},domProps:{checked:e._q(e.selectedUser.role,"Coordinator")},on:{change:function(t){return e.$set(e.selectedUser,"role","Coordinator")}}}),s("label",{staticClass:"form-check-label",attrs:{for:"coordinator"}},[e._v("Coordinator")])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser.role,expression:"selectedUser.role"}],staticClass:"form-check-input",attrs:{type:"radio",name:"privilege",id:"admin",value:"Administrator"},domProps:{checked:e._q(e.selectedUser.role,"Administrator")},on:{change:function(t){return e.$set(e.selectedUser,"role","Administrator")}}}),s("label",{staticClass:"form-check-label",attrs:{for:"admin"}},[e._v("Administrator")])])]),s("div",{staticClass:"form-group"},[s("div",[e._v("Activate/Deactivate")]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser.active,expression:"selectedUser.active"}],staticClass:"form-check-input",attrs:{type:"radio",name:"activation",id:"active",value:"true"},domProps:{checked:e._q(e.selectedUser.active,"true")},on:{change:function(t){return e.$set(e.selectedUser,"active","true")}}}),s("label",{staticClass:"form-check-label",attrs:{for:"active"}},[e._v("Active")])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser.active,expression:"selectedUser.active"}],staticClass:"form-check-input",attrs:{type:"radio",name:"activation",id:"inactive",value:"false"},domProps:{checked:e._q(e.selectedUser.active,"false")},on:{change:function(t){return e.$set(e.selectedUser,"active","false")}}}),s("label",{staticClass:"form-check-label",attrs:{for:"inactive"}},[e._v("Inactive")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.errors.length,expression:"errors.length !== 0"}],staticClass:"alert alert-danger mt-2",attrs:{role:"alert"}},e._l(e.errors,(function(t,a){return s("span",{key:a,staticClass:"d-block"},[e._v(" ★ "+e._s(t)+" ")])})),0)]),s("template",{slot:"button"},[s("button",{staticClass:"btn btn-secondary mr-3",attrs:{type:"button"},on:{click:e.closeModal}},[e._v("Close")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.updateProfile}},[e._v(" Update "),s("span",{staticClass:"mdi mdi-send"})])])],2)],1)},J=[],Q=(s("4de4"),s("4160"),s("159b"),{name:"AllCitizens",components:{SweetModal:E["a"]},created:function(){var e=this;this.getAllCitizens(),f["eventBus"].$on("updateUserProfile",(function(t){e.citizens.forEach((function(e){e._id===t.user._id&&(e.username=t.user.username),e.active=t.user.active,e.role=t.user.role}))}));var t=this.$cookies.get("user");this.loggedInUserRole=t.role},data:function(){return{citizens:[],selectedUser:{username:"",password:"",verifyPassword:"",role:"Citizen",active:!0},errors:[],oldUsername:"",loggedInUserRole:""}},computed:{filterCitizens:function(){return"Administrator"!==this.loggedInUserRole?this.citizens.filter((function(e){return!0===e.active})):this.citizens}},methods:{getUserProfileInfo:function(e){var t=this;t.oldUsername=e,t.$http.get(r["d"]+e).then((function(e){var s=e.data;t.selectedUser.username=s.data.username,t.selectedUser.role=s.data.role,t.selectedUser.active=s.data.active,t.$refs.username.focus()})).catch((function(e){console.log(e)})),this.$refs.modal.open()},closeModal:function(){this.$refs.modal.close(),this.selectedUser={username:"",password:"",verifyPassword:"",role:"Citizen",active:!0},this.errors=[]},updateProfile:function(){var e=this;e.errors=[];var t=this.validateData(this.selectedUser);0===t.length?(e.selectedUser.active="true"===e.selectedUser.active||!0===e.selectedUser.active,e.errors=[],e.$http.put(r["j"]+e.oldUsername,e.selectedUser).then((function(t){console.log(t),e.closeModal(),e.$swal({text:"Profile was successfully updated",icon:"success",toast:!1,showConfirmButton:!0})})).catch((function(t){t.response?e.errors.push(t.response.data.message):e.errors.push("Error occurred! Update failed."),console.log(t)}))):this.errors=t},validateData:function(e){var t=e.username,s=e.password,a=e.verifyPassword,n=[];return t.trim().length<2?n.push("Username is too short. At least 3 characters are allowed!"):0!==s.length&&s.trim().length<6?n.push("Short passwords are insecure! Minimum characters allowed are 6."):s!==a?n.push("Passwords do not match! Please try again."):s!==a&&n.push("Passwords do not match! Please try again."),n},getStatusColor:function(e){return U["STATUSES"][e.toUpperCase()].colorCode},getAllCitizens:function(){var e=this;e.$http.get(r["c"]).then((function(t){var s=t.data;e.citizens=s.data})).catch((function(e){alert(e)}))}}}),X=Q,Z=(s("f62e"),Object(u["a"])(X,H,J,!1,null,"3660e3b8",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-wrapper"},[s("div",{staticClass:"card mt-md-5 login-card"},[s("div",{staticClass:"card-body"},[s("h1",{staticClass:"display-5 text-center page-title"},[e._v("ESN Registration")]),s("form",{staticClass:"mt-sm-5"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter username",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[e._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Enter password",id:"password"},domProps:{value:e.password},on:{click:e.register,input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{href:""},on:{click:function(t){t.preventDefault(),e.collapseShown=!e.collapseShown}}},[s("span",{staticClass:"mdi",class:e.collapseShown?"mdi-minus":"mdi-plus"}),e._v(" Additional details (optional)")]),s("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[s("b-card",[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter First name"},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter Last name"},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Enter Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Phone"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})])])],1),s("button",{staticClass:"btn btn-primary btn-block my-2",attrs:{type:"button"},on:{click:e.register}},[e._v("Register")]),s("small",{staticClass:"d-block"},[e._v(" Already registered? click "),s("router-link",{attrs:{to:{name:"login"}}},[s("a",{attrs:{href:""}},[e._v("here")])]),e._v(" to login ")],1)],1)])])])},se=[],ae=s("5843"),ne={name:"UserRegistration",components:{BCollapse:ae["a"]},data:function(){return{username:"",password:"",firstName:"",lastName:"",email:"",phone:"",collapseShown:!1}},methods:{showAlertMessage:function(e){this.$swal({title:"Alert",text:e,icon:"error",toast:!1,showConfirmButton:!0})},register:function(){var e=this,t={username:this.username,password:this.password,firstName:this.firstName,lastName:this.lastName,email:this.email,phone:this.phone,status:"Undefined"};e.username.trim().length>0&&e.password.trim().length>0?e.$http.post(r["f"],t).then((function(){e.$swal({text:"Successfully registered. Now login to continue...",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:1e4,timerProgressBar:!0}),e.$cookies.set("newUser",e.username),e.$router.push({name:"all-citizens"})})).catch((function(){e.showAlertMessage("Sorry! An error occurred while trying to register")})):e.showAlertMessage("Username and Password are required!")}}},ie=ne,oe=(s("7952"),s("839e"),Object(u["a"])(ie,te,se,!1,null,"f6f4083a",null)),re=oe.exports,ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"private-chat-room"}},[s("div",{staticClass:"side-list"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.$mq.below(600),expression:"$mq.below(600)"}],attrs:{id:"btn-toggle-citizens-list",type:"button"},on:{click:e.toggleCitizensList}},[s("span",{staticClass:"mdi mdi-account-details-outline"})]),s("div",{class:e.showCitizensList?"":"hidden",attrs:{id:"citizens-list"}},[s("h6",{staticClass:"title"},[e._v("All Citizens")]),s("ul",e._l(e.filteredCitizens,(function(t){return s("li",{key:t._id,class:null!==e.chatWithCitizen&&e.chatWithCitizen.username===t.username?"active":"",on:{click:function(s){return e.selectCitizenToChatWith(t)}}},[s("div",{staticClass:"heading"},[s("span",[e._v(e._s(t.username))]),e._v(" "),s("span",{staticClass:"mdi mdi-chevron-right"})]),s("small",{style:{color:e.getStatusColor(t.status)}},[e._v("Status: "+e._s(e.getStatusLabel(t.status)))])])})),0)])]),e.chatWithCitizen?s("ChatRoom",{staticClass:"chat-room",attrs:{"chat-with-citizen":e.chatWithCitizen,"logged-in-username":e.loggedInUsername}}):s("div",{staticClass:"chat-room no-citizen-selected"},[s("span",[e._v("Select a citizen to chat with privately")])])],1)},le=[],ue={name:"PrivateChatRoom",components:{ChatRoom:W},created:function(){var e=this.$cookies.get("user");this.loggedInUsername=e.username,this.getAllCitizens()},data:function(){return{citizens:[],loggedInUsername:"",chatWithCitizen:null,showCitizensList:!0}},computed:{filteredCitizens:function(){var e=this;return this.citizens.filter((function(t){return t.username!==e.loggedInUsername}))}},watch:{"$mq.resize":"screenResize"},methods:{toggleCitizensList:function(){this.$mq.below(600)?this.showCitizensList=!this.showCitizensList:this.screenResize()},screenResize:function(){this.$mq.below(600)?this.showCitizensList=!1:this.showCitizensList=!0},getAllCitizens:function(){var e=this;e.$http.get(r["c"]).then((function(t){var s=t.data;e.citizens=s.data})).catch((function(e){alert(e)}))},selectCitizenToChatWith:function(e){this.loggedInUsername===e.username&&alert("Can't cha with oneself"),this.chatWithCitizen=e},getStatusLabel:function(e){return"UNDEFINED"===e.toUpperCase()?"Not available":e.toUpperCase()},getStatusColor:function(e){return U["STATUSES"][e.toUpperCase()].colorCode}}},de=ue,me=(s("12767"),Object(u["a"])(de,ce,le,!1,null,"0985f618",null)),he=me.exports,pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content px-md-5"},[s("h3",{staticClass:"display-4"},[e._v("Share Status")]),s("div",{staticClass:"mb-2"}),s("form",{attrs:{action:""}},[e._m(0),e._l(e.statuses,(function(t,a){return s("div",{key:a,staticClass:"row mb-1 font-weight-bold",style:{color:e.getStatusColor(t.name)}},[s("div",{staticClass:"col-md-1 offset-md-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedStatus,expression:"selectedStatus"}],attrs:{name:"status",type:"radio"},domProps:{value:t.name,checked:e._q(e.selectedStatus,t.name)},on:{change:function(s){e.selectedStatus=t.name}}})]),s("div",{staticClass:"col-md-2"},[e._v(e._s(t.name))]),s("div",{staticClass:"col-md-6"},[e._v(e._s(t.description))])])})),s("button",{staticClass:"mt-3",attrs:{id:"btn-share-status",type:"button"},on:{click:e.shareStatus}},[e._v("Share status")])],2)])},fe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row title text-black-50 mb-1"},[s("div",{staticClass:"col-md-1 offset-md-1"}),s("div",{staticClass:"col-md-2"},[e._v("Name")]),s("div",{staticClass:"col-md-6"},[e._v("Description")])])}],ve={name:"ShareStatus",created:function(){var e=this.$cookies.get("user");this.loggedInUsername=e.username},data:function(){return{loggedInUsername:"",statuses:[{name:"OK",description:"I am OK, I do not need help",colorCode:"Green",icon:"Icon"},{name:"Help",description:"I need help, but this is not a life threatening emergency",colorCode:"Yellow",icon:"Icon"},{name:"Emergency",description:"I need help now, as this is a life threatening emergency!",colorCode:"Red",icon:"Icon"},{name:"Undefined",description:"The user has not been providing her status yet.",colorCode:"",icon:""}],selectedStatus:"",currentStatus:"undefined"}},methods:{getStatusColor:function(e){return U["STATUSES"][e.toUpperCase()].colorCode},shareStatus:function(){var e=this;e.$http.put(r["k"]+e.loggedInUsername,{status:e.selectedStatus}).then((function(e){console.log(e),alert("Successfully shared!")})).catch((function(e){alert(e)}))}}},ge=ve,Ce=(s("1240"),Object(u["a"])(ge,pe,fe,!1,null,"411eb34d",null)),we=Ce.exports,be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"post-announcemnt"}},[s("div",{attrs:{id:"wrapper"}},["Coordinator"===e.user.role||"Administrator"===e.user.role?s("form",{attrs:{id:"announcement-form"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newAnnouncement,expression:"newAnnouncement"}],staticClass:"input-announcement",attrs:{rows:"5",placeholder:"Enter announcement"},domProps:{value:e.newAnnouncement},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.postAnnouncement(t)},input:function(t){t.target.composing||(e.newAnnouncement=t.target.value)}}}),e._v(" "),s("button",{staticClass:"btn-post-announcement",attrs:{type:"button"},on:{click:e.postAnnouncement}},[e._v(" Post Announcement "),s("span",{staticClass:"mdi mdi-send"})])]):e._e(),s("h3",[e._v("List of announcements")]),s("div",{attrs:{id:"announcements"}},[e._l(e.announcements,(function(t,a){return s("div",{key:a,staticClass:"announcement"},[s("h4",[e._v(e._s(t.sender))]),s("div",{staticClass:"announcement-content"},[e._v(e._s(t.content))]),s("small",[e._v(e._s(e._f("moment")(t.postedAt,"dddd, MMMM Do YYYY, h:mm a")))])])})),e.announcements.length<1?s("p",{staticClass:"text-center mt-3"},[s("small",[e._v("No announcements available yet!")])]):e._e()],2)])])},ye=[],_e={name:"PostAnnouncement",created:function(){var e=this;f["eventBus"].$on("updateUserProfile",(function(t){t.isMe&&(e.user.username=t.user.username,e.user.role=t.user.role)}));var t=this.$cookies.get("user");this.user.username=t.username,this.user.role=t.role,this.getAllAnnouncements()},mounted:function(){var e=this;f["eventBus"].$on("newAnnouncement",(function(t){t.sender!==e.user.username&&(e.announcements=e.announcements.concat(t))}))},data:function(){return{user:{username:"",role:""},newAnnouncement:"",announcements:[]}},methods:{postAnnouncement:function(){var e=this,t={sender:e.user.username,content:e.newAnnouncement};0!==e.newAnnouncement.trim().length?e.$http.post(r["g"],t).then((function(){e.announcements=e.announcements.concat(t),e.newAnnouncement=""})).catch((function(e){alert(e)})):alert("You cannot post empty announcement!")},getAllAnnouncements:function(){var e=this;e.$http.get(r["a"]).then((function(t){var s=t.data;e.announcements=s.data})).catch((function(e){alert(e)}))}}},ke=_e,Ue=(s("55ba"),Object(u["a"])(ke,be,ye,!1,null,"65335c64",null)),xe=Ue.exports,Se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-page-wrapper"},[s("h4",{staticClass:"display-4 text-center mt-4 page-title"},[e._v("Search Information")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5"},[s("h5",{staticClass:"section-title display-4"},[e._v("Search Form")]),s("div",{staticClass:"search-form"},[s("label",{attrs:{for:"search-options"}},[e._v("Search context")]),s("multiselect",{attrs:{id:"search-options",options:e.searchOptions,label:"label","track-by":"label",searchable:!1,"close-on-select":!0,"show-labels":!1,placeholder:"Select context"},model:{value:e.selectedSearchOption,callback:function(t){e.selectedSearchOption=t},expression:"selectedSearchOption"}}),s("label",{attrs:{for:"search-field"}},[e._v("Search Field")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"text",name:"search-text",id:"search-field",placeholder:e.selectedSearchOption?e.selectedSearchOption.placeholder:"Select context first to search"},domProps:{value:e.searchText},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)},input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),s("button",{attrs:{type:"button",id:"btn-search"},on:{click:e.search}},[s("span",{staticClass:"mdi mdi-magnify"}),e._v(" Search ")])],1)]),s("div",{staticClass:"col-md-7"},[s("h5",{staticClass:"section-title display-4"},[e._v("Search Results")]),s("div",{staticClass:"search-results"},[e._l(e.searchResults,(function(t,a){return s("div",{key:a,staticClass:"search-result"},[s("div",{staticClass:"heading"},[e._v(" "+e._s(t.sender?""+t.sender:""+t.username)+" "+e._s(t.status?"(status: "+t.status+" )":"")+" ")]),s("div",{staticClass:"body"},[t.postedAt?s("small",[e._v(e._s(t.postedAt))]):e._e(),s("div",{staticClass:"content"},[e._v(" "+e._s(t.content||"")+" ")])])])})),0===e.searchResults.length?s("div",{staticClass:"search-result no-results"},[s("span",{staticClass:"mdi mdi-alert-outline mdi-24px"}),e._v(" No search results! ")]):e._e()],2)])])])},$e=[],Pe=(s("7db0"),s("a15b"),s("466d"),["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),ze={name:"SearchInformation",created:function(){var e=this.$cookies.get("user");this.loggedInUsername=e.username},data:function(){return{searchOptions:[{label:"Citizens by username",placeholder:"Type username here...",context:"citizens",criteria:"username",searchText:""},{label:"Citizens by status",placeholder:"Type status here...",context:"citizens",criteria:"status",searchText:""},{label:"Announcement",placeholder:"Type words to search for here...",context:"announcements",criteria:"content",searchText:""},{label:"Public chats",placeholder:"Type words to search for here...",context:"public_chats",criteria:"content",searchText:""},{label:"Private chats",placeholder:"Type words to search for here...",context:"private_chats",criteria:"content",searchText:""}],selectedSearchOption:null,searchText:"",searchResults:[],loggedInUsername:""}},methods:{search:function(){var e=this,t=this.filterOutStopWords(this.searchText);if(t=t.join(" "),this.selectedSearchOption){var s={context:this.selectedSearchOption.context,criteria:this.selectedSearchOption.criteria,searchText:t,username:this.loggedInUsername};this.$http.post(r["i"],s).then((function(t){var s=t.data;e.searchResults=s.data,e.searchText=""})).catch((function(){}))}},filterOutStopWords:function(e){var t=this.breakTextIntoArrayOfWords(e);return t.filter((function(e){return!Pe.find((function(t){return e===t}))}))},breakTextIntoArrayOfWords:function(e){return e.match(/\b(\w+)'?(\w+)?\b/g)}}},Ae=ze,Ne=(s("60bc"),s("da30"),Object(u["a"])(Ae,Se,$e,!1,null,"308f269a",null)),Ie=Ne.exports;a["default"].use(n["a"]);var Oe=[{path:"/",name:"home",component:m},{path:"/login",name:"login",component:m},{path:"/register",name:"register",component:re},{path:"/",component:w,children:[{path:"public-chat",name:"chat",component:G,meta:{requiresAuth:!0}},{path:"citizens",name:"all-citizens",component:ee,meta:{requiresAuth:!0}},{path:"status",name:"share-status",component:we,meta:{requiresAuth:!0}},{path:"private-chat",name:"private-chat",component:he,meta:{requiresAuth:!0}},{path:"post-announcement",name:"post-announcement",component:xe,meta:{requiresAuth:!0}},{path:"search",name:"search-information",component:Ie,meta:{requiresAuth:!0}}]}],Ee=new n["a"]({mode:"history",base:"/",routes:Oe});t["a"]=Ee},aed4:function(e,t,s){},bbb0:function(e,t,s){},c9c9:function(e,t,s){},da30:function(e,t,s){"use strict";var a=s("0cbc"),n=s.n(a);n.a},e9bd:function(e,t,s){},e9d9:function(e,t,s){},eacb:function(e,t,s){"use strict";var a=s("aed4"),n=s.n(a);n.a},f457:function(e,t,s){"use strict";var a=s("58aa"),n=s.n(a);n.a},f62e:function(e,t,s){"use strict";var a=s("7391"),n=s.n(a);n.a},f9c4:function(e,t,s){"use strict";s.d(t,"n",(function(){return a})),s.d(t,"m",(function(){return n})),s.d(t,"e",(function(){return i})),s.d(t,"b",(function(){return o})),s.d(t,"h",(function(){return r})),s.d(t,"l",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"j",(function(){return d})),s.d(t,"f",(function(){return m})),s.d(t,"k",(function(){return h})),s.d(t,"a",(function(){return p})),s.d(t,"g",(function(){return f})),s.d(t,"i",(function(){return v}));const a=()=>"/",n=()=>window.location.protocol+"//"+window.location.host+"/",i="users/login",o="chats/",r="chats/",c="chats/upload/",l="users/",u="users/",d="users/",m="users/",h="users/status/",p="announcements/",f="announcements/",v="search"}});
//# sourceMappingURL=app.85b27e86.js.map